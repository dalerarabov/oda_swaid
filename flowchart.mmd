graph TD
    A[Запуск скрипта] --> B[Инициализация логирования и параметров]
    B --> C[Парсинг аргументов командной строки]
    C --> D[Проверка наличия файлов данных]
    D --> E[Загрузка браслетов из bracelets.json]
    E --> F{Валидное имя сессии?}
    F -->|Нет| G[Выход с ошибкой]
    F -->|Да| H[Установка временных параметров]
    H -->|USE_FIXED_START| I[Использовать фиксированное время]
    H -->|Динамическое| J[Использовать текущее время]
    I --> K[Основной цикл]
    J --> K
    K --> L[Создание пула потоков ThreadPoolExecutor]
    L --> M[Запрос данных для каждого браслета]
    M --> N[Обработка ответов]
    N --> O[Обновление измерений и данных TD]
    O --> P[Сохранение в measurements.json и td_data.json]
    P --> Q[Вывод таблицы]
    Q --> R[Ожидание FETCH_INTERVAL_SEC]
    R -->|Продолжить| K
    K -->|KeyboardInterrupt| S[Создание бэкапов]
    S --> T[Завершение пула потоков]
    T --> U[Выход]
    K -->|Ошибка| V[Логирование ошибки]
    V --> S
    A -->|Ctrl+C| W[Обработчик сигнала]
    W --> S